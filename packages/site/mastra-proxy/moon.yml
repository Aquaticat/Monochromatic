$schema: 'https://moonrepo.dev/schemas/project.json'
language: 'typescript'

tags:
- package
- serve

dependsOn:
- 'es'

tasks:
  js_default:
    deps:
    - 'es:js'
    command: 'mastra build'
    outputs:
    - '@group(distMastra)'

  js:
    outputs:
    - '@group(distMastra)'
    options:
      mergeOutputs: replace

  js_defaultWatch:
    command: 'mastra dev'
    options:
      mergeArgs: replace
    local: true

  start:
    deps:
    - js
    command: 'mastra start'
    local: true
