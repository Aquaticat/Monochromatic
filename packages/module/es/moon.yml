$schema: 'https://moonrepo.dev/schemas/project.json'
language: 'typescript'

dependsOn:
- 'vite'

tags:
- 'dualBuildsNodeBrowser'
- package

toolchain:
  typescript:
    # Cannot use project references because it uses export conditions to build itself.
    syncProjectReferences: false

tasks:
  # FIXME: Setup moon outputs correctly.
  js_default:
    options:
      # I dunno why the cache performance is so bad here.
      cache: false
  js_node:
    options:
      cache: false
